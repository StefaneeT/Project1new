---
title: "Project 1"
author: "Stefanee Tillman"
date: "9/25/2021"
output: github_document
---

This is a vignette to show how to get data from an API. In this vignette we will be exploring data from a COVID-19 API. To begin, I will create a few functions to interact with two of the endpoints and explore some of the data I can retrieve Globally and by Country.

Some of these functions return data at a Global level and some of the APIs use the data by specified Country. A recommendation is to supply a full Country name (e.g. "Afghanistan").


```{r, eval = FALSE}
rmarkdown::render("C:/Users/Stefa/OneDrive/Documents/GitHub/Project1new/Project1new.rmd",
 output_format = "github_document",
 output_file = "README.md",
 output_options = list(
 toc = FALSE,
 toc_depth = 3,
 number_sections = FALSE,
 df_print = "default",
keep_html = FALSE
))
```

# Required Packages

In this section shows the required packages needed to create this project.

• `rmarkdown()` to convert rmarkdown using the render() function.

• `knitr()` produces flexible designs and finer control of graphics.

• `tidyverse()` to generate plots, use chaining/piping, and manipulate data.

• `jsonlite()` to convert between JSON data and R objects.

• `vignette()` to view and display vignette.

```{r, message=FALSE, echo= FALSE}
require("httr")
require("jsonlite")
require("dplyr")
require("tidyverse")
```

# Data Exploration/Pulling Data

Here we will pull the data using the head function to begin modeling

```{r, message=FALSE}

#Get the data end points from the API
my_url<- GET("https://api.covid19api.com/summary")
my_result_text<- content(my_url, as = 'text')
my_result_json<- fromJSON(my_result_text, flatten = TRUE)
my_result_df<- as.data.frame(my_result_json)
my_result_df

#Pulling Country Data
data.by.Countries <-select(my_result_df, c('Countries.Country', 'Countries.CountryCode', 'Countries.NewConfirmed', 'Countries.TotalConfirmed', 'Countries.NewDeaths', 'Countries.TotalDeaths', 'Countries.NewRecovered', 'Countries.TotalRecovered', 'Countries.Date'))



#Pulling Global Data
data.by.Globe <-select(my_result_df, c('Global.NewConfirmed', 'Global.TotalConfirmed', 'Global.NewDeaths', 'Global.TotalDeaths', 'Global.NewRecovered', 'Global.TotalRecovered', 'Global.Date'))

#Pulling Day one Data
my_url2<- GET("https://api.covid19api.com/dayone/country/south-africa/status/confirmed")
my_result_text2<- content(my_url2, as = 'text')
my_result_json2<- fromJSON(my_result_text2, flatten = TRUE)
my_result_json2


```

 #Two new added variables
 
Here two new variables are created to display the cumulative sum of the variable "Countries.NewConfirmed" which displays the new confirmed Covid-19 cases by country and the cumulative sum of the "Countries.NewDeaths" which displays the new deaths from Covid-19 by country.There is also the daily confirm South-Africa Cases.


```{r, message=FALSE, echo= FALSE}
require(tidyverse)
require(dplyr)

#Create two new variables 
data.by.Countries<- data.by.Countries %>%  mutate(cumsum1 = cumsum(data.by.Countries$Countries.NewConfirmed), cumsum2 = cumsum(data.by.Countries$Countries.NewDeaths))
data.by.Countries
```

# Contingency Tables

A contingency table is a way to redraw data and assemble it into a table. A contingency table will show the original data in a manner that allows the reader to gain an overall summary of the original data provided.

The table `tab1` displays the number of new confirmed Covid-19 cases as of the specified date.

The table `tab2` displays the number of new Covid-19 deaths as of the specified date.

The table `tab3` displays the number of Total Covid-19 Deaths as of the specified date.

```{r}
#table() creates contingency tables

tab1<- table(data.by.Countries$Countries.Date, data.by.Countries$Countries.NewConfirmed)
tab1

tab2<- table(data.by.Countries$Countries.Date, data.by.Countries$Countries.NewDeaths)
tab2

tab3<- table(data.by.Countries$Countries.Date, data.by.Countries$Countries.TotalDeaths)
tab3

```


# Numerical Summaries for some Quantitative Variables

Numerical summaries provide all results from summary this can include the min, Q1, mean, median, Q3, and max and a valid sample size

```{r}
#Numerical Summary of variables by each country
summary(data.by.Countries)

#Numerical Summary of variables by Globe
summary(data.by.Globe)

```


# Create Five plots
 
Plots provide viewers with a visualization of the data and the distribution of the dataset. It also will show how variables relate to one another.
